<!doctype html>
<html lang="sk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Love Mail</title>

  <style>
    /* =========================================================
       0) RESET + VELKOSTI
    ========================================================== */
    :root{
      /* Card */
      --card-bg: #f7f0e6;
      --card-radius: 30px;
      --card-shadow: 0 22px 50px rgba(0,0,0,.35);

      /* Colors */
      --red:  #c9162e;
      --red2: #a71226;
      --ink:  #9e0f2a;
      --ink2: #d22a3a;

      /* Background */
      --bgA: #070406;
      --bgB: #1b0a10;
      --bgC: #080306;

      /* Responsive card size */
      --card-w: min(1100px, 92vw);
      --card-h: min(560px, 74dvh); /* d vh je stabilnej≈°ie */
      --pad: clamp(18px, 3vw, 44px);

      /* Envelope size */
      --env-w: min(360px, 82vw);
      --env-h: 240px;

      /* Anim timing */
      --t: 720ms;
      --e: cubic-bezier(.2,.9,.2,1);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      overflow:hidden; /* ≈æiadny scroll, nikdy */
      -webkit-text-size-adjust: 100%;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(1200px 700px at 50% 40%, rgba(170,20,55,.28), transparent 60%),
        radial-gradient(900px 500px at 60% 60%, rgba(90,10,30,.22), transparent 55%),
        radial-gradient(1400px 900px at 50% 50%, var(--bgB), var(--bgA) 55%, var(--bgC));
    }

    /* =========================================================
       1) FIXED BACKGROUND DECOR (HEARTS/ROSE/...) ‚Äì NIKDY SA NEH√ùBE
    ========================================================== */
    .bg{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:0;
      overflow:hidden;
    }

    .float{
      position:absolute;
      opacity:.75;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.25));
      animation: bob 4.5s ease-in-out infinite;
      transform: translate3d(0,0,0);
      font-size: 22px;
    }
    .float.big{ font-size: 28px; opacity:.85; }
    .float.small{ font-size: 18px; opacity:.55; }

    @keyframes bob{
      0%,100%{ transform: translate3d(0,0,0); }
      50%{ transform: translate3d(0,-10px,0); }
    }

    /* poz√≠cie podobn√© tvojim screenshotom */
    .f1{ left: 4%;  top: 12%; animation-duration: 5.0s; }
    .f2{ right:6%;  top: 18%; animation-duration: 4.2s; }
    .f3{ right:6%;  top: 44%; animation-duration: 4.8s; }
    .f4{ left: 46%; bottom: 8%; animation-duration: 4.4s; }
    .f5{ left: 52%; top: 50%; opacity:.15; font-size: 64px; filter: blur(.2px); animation-duration: 6.6s; } /* jemn√Ω stredov√Ω "blob" */

    /* =========================================================
       2) VIEWPORT = 100% FIXED + GRID CENTER
       -> toto je kƒæ√∫ƒç: v≈ædy perfektne v strede
    ========================================================== */
    .viewport{
      position:fixed;
      inset:0;
      z-index:1;
      display:grid;
      place-items:center;
      padding: clamp(14px, 3.2vw, 44px);
      height: 100dvh;
      width: 100vw;
    }

    /* =========================================================
       3) CARD = PRESNE V STREDE + OVERFLOW HIDDEN (niƒç nevylezie)
    ========================================================== */
    .card{
      width: var(--card-w);
      height: var(--card-h);
      background: var(--card-bg);
      border-radius: var(--card-radius);
      box-shadow: var(--card-shadow);
      position:relative;
      overflow:hidden;            /* aby list re√°lne "zostal v ob√°lke" */
      transform: translate3d(0,0,0);
    }

    /* =========================================================
       4) SCENES (views) ‚Äì V≈ΩDY CENTROVAN√â v karte
    ========================================================== */
    .view{
      position:absolute;
      inset:0;
      padding: var(--pad);
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      text-align:center;

      opacity:0;
      transform: translate3d(0,18px,0) scale(.995);
      pointer-events:none;
      transition: opacity var(--t) ease, transform var(--t) var(--e);
    }
    .view.is-active{
      opacity:1;
      transform: translate3d(0,0,0) scale(1);
      pointer-events:auto;
    }

    /* =========================================================
       5) TYPO (tvoj ≈°t√Ωl)
    ========================================================== */
    .script{
      margin:0;
      color: var(--ink);
      font-family: ui-serif, "Snell Roundhand", "Apple Chancery", "Brush Script MT", cursive;
      text-shadow: 0 3px 0 rgba(0,0,0,.08);
      letter-spacing:.5px;
    }
    .h-script{
      font-size: clamp(40px, 5.2vw, 78px);
      margin-bottom: 18px;
    }

    .hint{
      margin-top: 14px;
      color: rgba(180,70,85,.75);
      font-size: clamp(14px, 1.8vw, 18px);
      font-family: ui-serif, Georgia, serif;
    }

    .text{
      max-width: 720px;
      margin: 0 auto;
      color: var(--ink2);
      font-family: ui-serif, Georgia, serif;
      font-size: clamp(16px, 2.05vw, 22px);
      line-height: 1.65;
    }

    /* =========================================================
       6) ENVELOPE ‚Äì presne v strede + list je v ob√°lke
    ========================================================== */
    .envelope-wrap{
      width: 100%;
      display:flex;
      justify-content:center; /* toto zabije posun doƒæava */
      align-items:center;
    }

    .envelope{
      width: var(--env-w);
      height: var(--env-h);
      position:relative;
      cursor:pointer;
      border:0;
      background:transparent;
      padding:0;
      outline:none;
      transform: translate3d(0,0,0);
    }

    /* jemn√Ω tie≈à pod ob√°lkou */
    .env-shadow{
      position:absolute;
      left:50%;
      bottom:-18px;
      width: 70%;
      height: 22px;
      transform: translateX(-50%);
      background: radial-gradient(closest-side, rgba(0,0,0,.25), transparent 70%);
      filter: blur(1px);
      opacity:.35;
      pointer-events:none;
    }

    /* Envelope layers */
    .env-back{
      position:absolute;
      inset:0;
      border-radius: 18px;
      background: linear-gradient(180deg, #d21e38, #b1152c);
      box-shadow: 0 14px 24px rgba(0,0,0,.18);
      z-index:1;
    }

    /* Front shape */
    .env-front{
      position:absolute;
      inset:0;
      border-radius: 18px;
      background: linear-gradient(180deg, var(--red), var(--red2));
      clip-path: polygon(0 36%, 50% 66%, 100% 36%, 100% 100%, 0 100%);
      z-index:4;
    }

    /* Flap */
    .env-flap{
      position:absolute;
      inset:0;
      border-radius: 18px;
      background: linear-gradient(180deg, var(--red2), var(--red));
      clip-path: polygon(0 36%, 50% 0, 100% 36%, 50% 66%);
      transform-origin: 50% 36%;
      transform: rotateX(0deg);
      transition: transform var(--t) var(--e);
      z-index:5;
      backface-visibility:hidden;
    }

    /* Letter (RE√ÅLNE v ob√°lke) */
    .letter{
      position:absolute;
      left:50%;
      bottom: 10px;
      width: 84%;
      height: 78%;
      transform: translateX(-50%) translateY(42%); /* zatvoren√©: je vn√∫tri ob√°lky */
      transition: transform var(--t) var(--e);
      z-index:3;
      pointer-events:none;
    }
    .letter-paper{
      width:100%;
      height:100%;
      background: #f5efe6;
      border-radius: 14px;
      box-shadow: 0 12px 22px rgba(0,0,0,.12);
      display:grid;
      place-items:center;
      position:relative;
      overflow:hidden;
    }

    /* mal√Ω ‚Äúphoto‚Äù kruh ako na screenshote */
    .seal{
      width: 64px;
      height: 64px;
      border-radius: 999px;
      background: #ffd1dc;
      border: 8px solid #f2e9dd;
      box-shadow: 0 10px 16px rgba(0,0,0,.14);
      display:grid;
      place-items:center;
      color:#a11c2b;
      font-weight:800;
      font-size: 12px;
      letter-spacing:.2px;
    }

    /* OPEN state: flap sa otvor√≠ + list vyjde hore */
    .envelope.is-open .env-flap{
      transform: rotateX(180deg);
    }
    .envelope.is-open .letter{
      transform: translateX(-50%) translateY(-30%); /* otvoren√©: vyjde von */
    }

    /* =========================================================
       7) FLOWERS VIEW
    ========================================================== */
    .emoji-row{
      font-size: 54px;
      margin: 14px 0 10px;
      filter: drop-shadow(0 10px 12px rgba(0,0,0,.10));
    }
    .choose{
      margin-top: 18px;
      font-size: clamp(20px, 2.5vw, 30px);
      color: var(--ink2);
      font-family: ui-serif, Georgia, serif;
      font-weight: 700;
    }
    .gifts{
      margin-top: 14px;
      display:flex;
      gap: 22px;
      justify-content:center;
      align-items:center;
      flex-wrap:wrap;
    }
    .gift{
      width: 120px;
      height: 110px;
      border-radius: 16px;
      border:0;
      cursor:pointer;
      background: #8f0d22;
      color:#fff;
      font-size: 36px;
      box-shadow: 0 14px 30px rgba(0,0,0,.14);
      transition: transform 120ms ease;
    }
    .gift:active{ transform: translateY(1px); }

    .navrow{
      margin-top: 16px;
      display:flex;
      gap: 10px;
      justify-content:center;
    }
    .pill{
      border:0;
      cursor:pointer;
      padding: 10px 14px;
      border-radius: 999px;
      background: rgba(158,15,42,.10);
      color: var(--ink);
      font-weight: 800;
    }

    /* =========================================================
       8) VALENTINE VIEW + NO BUTTON ESCAPE
    ========================================================== */
    .val-title{
      font-family: ui-serif, Georgia, serif;
      font-weight: 900;
      letter-spacing: .08em;
      color: var(--ink2);
      margin: 0 0 8px;
      font-size: clamp(18px, 2.4vw, 28px);
    }
    .val-script{
      margin: 0 0 10px;
      font-size: clamp(46px, 6vw, 82px);
    }
    .heart{
      width: 90px;
      height: 78px;
      margin: 6px auto 18px;
      background:
        radial-gradient(circle at 30% 35%, #ffc1d0, #ff8fb0 70%),
        radial-gradient(circle at 70% 35%, #ffc1d0, #ff8fb0 70%);
      background-size: 50% 100%, 50% 100%;
      background-position: left, right;
      background-repeat:no-repeat;
      clip-path: polygon(50% 92%, 5% 45%, 18% 18%, 35% 15%, 50% 30%, 65% 15%, 82% 18%, 95% 45%);
      filter: drop-shadow(0 10px 12px rgba(0,0,0,.10));
      opacity:.95;
    }

    .btn-area{
      position:relative;
      width: min(520px, 92%);
      height: 110px;
      margin-top: 6px;
    }
    .btn{
      position:absolute;
      top: 22px;
      width: 150px;
      height: 64px;
      border-radius: 14px;
      border:0;
      cursor:pointer;
      font-weight: 900;
      font-size: 22px;
      color:#fff;
      box-shadow: 0 14px 24px rgba(0,0,0,.14);
      transition: transform 120ms ease;
    }
    .btn:active{ transform: translateY(1px); }

    .btn-yes{
      left: 50%;
      transform: translateX(calc(-100% - 16px));
      background: #8f0d22;
    }
    /* NO bude JS pos√∫va≈•, ale ≈°tart je napravo */
    .btn-no{
      left: 50%;
      transform: translateX(16px);
      background: #d11f3b;
    }

    .home{
      margin-top: 10px;
      width: 44px;
      height: 44px;
      border-radius: 999px;
      border: 2px solid rgba(158,15,42,.55);
      background: rgba(255,255,255,.35);
      display:grid;
      place-items:center;
      font-size: 20px;
      cursor:pointer;
    }

    /* =========================================================
       9) MODAL (letter/photos/song) ‚Äì presne v strede
    ========================================================== */
    .overlay{
      position:fixed;
      inset:0;
      background: rgba(0,0,0,.62);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:50;
      padding: 18px;
    }
    .overlay.is-open{ display:flex; }

    .modal{
      width: min(820px, 94vw);
      background: var(--card-bg);
      border-radius: 18px;
      box-shadow: 0 22px 60px rgba(0,0,0,.35);
      position:relative;
      padding: 26px 26px 22px;
      transform: translate3d(0,10px,0);
      opacity:0;
      transition: transform 220ms ease, opacity 220ms ease;
    }
    .overlay.is-open .modal{
      transform: translate3d(0,0,0);
      opacity:1;
    }

    .close{
      position:absolute;
      right: 14px;
      top: 10px;
      width: 40px;
      height: 40px;
      border-radius: 999px;
      border:0;
      cursor:pointer;
      background: transparent;
      color:#b2192e;
      font-size: 26px;
      font-weight: 900;
      line-height: 40px;
    }

    .modal h3{
      margin: 0 0 12px;
      text-align:center;
      color: var(--ink);
      font-size: clamp(28px, 3.8vw, 44px);
      font-family: ui-serif, "Snell Roundhand", "Apple Chancery", "Brush Script MT", cursive;
    }
    .modal p{
      margin: 0 auto;
      max-width: 700px;
      text-align:center;
      color: var(--ink2);
      font-family: ui-serif, Georgia, serif;
      font-size: clamp(15px, 2vw, 18px);
      line-height:1.65;
    }

    /* gallery */
    .gallery{
      display:grid;
      grid-template-columns: 1fr;
      gap: 14px;
      margin-top: 10px;
    }
    .viewer{
      width:100%;
      border-radius: 14px;
      box-shadow: 0 12px 22px rgba(0,0,0,.12);
      aspect-ratio: 16/9;
      object-fit: cover;
      background:#eee;
    }
    .thumbs{
      display:grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 10px;
    }
    .thumbs button{
      border:0;
      padding:0;
      border-radius: 12px;
      overflow:hidden;
      cursor:pointer;
      box-shadow: 0 10px 18px rgba(0,0,0,.10);
      background:#eee;
    }
    .thumbs img{
      width:100%;
      height: 70px;
      object-fit: cover;
      display:block;
    }

    /* youtube */
    .yt{
      width:100%;
      aspect-ratio: 16/9;
      border-radius: 14px;
      overflow:hidden;
      box-shadow: 0 12px 22px rgba(0,0,0,.12);
      background:#000;
      margin-top: 10px;
    }
    iframe{ width:100%; height:100%; border:0; }

    @media (max-width:520px){
      :root{ --env-h: 220px; }
      .gift{ width: 104px; height: 96px; font-size: 32px; }
      .thumbs{ grid-template-columns: repeat(3, 1fr); }
      .thumbs img{ height: 62px; }
      .btn{ width: 135px; height: 60px; font-size: 20px; }
    }

    @media (prefers-reduced-motion: reduce){
      *{ animation:none !important; transition:none !important; }
    }
  </style>
</head>

<body>
  <!-- FIX background decor -->
  <div class="bg" aria-hidden="true">
    <span class="float big f1">üíó</span>
    <span class="float big f2">üíñ</span>
    <span class="float f3">üåπ</span>
    <span class="float small f4">‚ú®</span>
    <span class="float f5">üü¢</span>
  </div>

  <div class="viewport">
    <div class="card" id="card">

      <!-- VIEW 1: LOVE MAIL / envelope -->
      <section class="view is-active" id="viewClosed">
        <h1 class="script h-script">Love Mail</h1>

        <div class="envelope-wrap">
          <button class="envelope" id="envelope" aria-label="Open envelope">
            <span class="env-shadow" aria-hidden="true"></span>

            <span class="env-back" aria-hidden="true"></span>

            <!-- LIST JE V OB√ÅLKE -->
            <span class="letter" aria-hidden="true">
              <span class="letter-paper">
                <span class="seal">Photo</span>
              </span>
            </span>

            <span class="env-front" aria-hidden="true"></span>
            <span class="env-flap" aria-hidden="true"></span>
          </button>
        </div>

        <div class="hint">click the red envelope to open</div>
      </section>

      <!-- VIEW 2: FLOWERS -->
      <section class="view" id="viewFlowers">
        <h1 class="script h-script" style="margin-bottom: 8px;">Flowers for you</h1>

        <p class="text" style="margin-top: 8px;">
          My dearest love, these flowers pale in comparison to your beauty.
          Each petal reminds me of the moments we've shared, and I hope this brings a smile to your face.
        </p>

        <div class="emoji-row">üåπüíêüå∏</div>

        <div class="choose">Choose your gift</div>

        <div class="gifts">
          <button class="gift" data-modal="letter" aria-label="Open letter">üíå</button>
          <button class="gift" data-modal="photos" aria-label="Open photos">üì∏</button>
          <button class="gift" data-modal="song" aria-label="Open song">üéµ</button>
        </div>

        <div class="navrow">
          <button class="pill" id="toValentine">Go to Valentine</button>
        </div>
      </section>

      <!-- VIEW 3: VALENTINE -->
      <section class="view" id="viewValentine">
        <div class="val-title">WILL YOU BE MY</div>
        <h1 class="script val-script">Valentine?</h1>
        <div class="heart"></div>

        <div class="btn-area" id="btnArea">
          <button class="btn btn-yes" id="yesBtn">YES</button>
          <button class="btn btn-no" id="noBtn">NO</button>
        </div>

        <button class="home" id="homeBtn" aria-label="Home">üè†</button>
      </section>

    </div>
  </div>

  <!-- MODAL -->
  <div class="overlay" id="overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true">
      <button class="close" id="closeModal" aria-label="Close">√ó</button>
      <div id="modalBody"></div>
    </div>
  </div>

  <!-- Templates -->
  <template id="tplLetter">
    <h3>My Dearest My Love,</h3>
    <p>
      From the moment I met you, my world changed forever. Your smile lights up my darkest days,
      and your laughter is the sweetest melody. I cherish every moment we spend together and look
      forward to many more.<br><br>
      Will you be my Valentine and make this journey even more beautiful?<br><br>
      With all my love,<br>
      Your Admirer
    </p>
  </template>

  <template id="tplPhotos">
    <h3>Happy moments</h3>
    <div class="gallery">
      <img class="viewer" id="viewer" alt="Photo preview">
      <div class="thumbs" id="thumbs">
        <button type="button" data-src="assets/photo1.jpg" aria-label="Photo 1">
          <img src="assets/photo1.jpg" alt="Photo 1">
        </button>
        <button type="button" data-src="assets/photo2.jpg" aria-label="Photo 2">
          <img src="assets/photo2.jpg" alt="Photo 2">
        </button>
        <button type="button" data-src="assets/photo3.jpg" aria-label="Photo 3">
          <img src="assets/photo3.jpg" alt="Photo 3">
        </button>
        <button type="button" data-src="assets/photo4.jpg" aria-label="Photo 4">
          <img src="assets/photo4.jpg" alt="Photo 4">
        </button>
        <button type="button" data-src="assets/photo5.jpg" aria-label="Photo 5">
          <img src="assets/photo5.jpg" alt="Photo 5">
        </button>
      </div>
    </div>
    <p style="margin-top:12px;">(Vymen√≠≈° si fotky v assets/.)</p>
  </template>

  <template id="tplSong">
    <h3>A little song</h3>
    <div class="yt">
      <!-- vymen√≠me nesk√¥r VIDEO_ID -->
      <iframe
        id="ytFrame"
        src="https://www.youtube.com/embed/dQw4w9WgXcQ?rel=0"
        title="YouTube video"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        allowfullscreen></iframe>
    </div>
    <p style="margin-top:12px;">(Potom dolad√≠me, ak√° pesniƒçka presne.)</p>
  </template>

  <script>
    /* =========================================================
       VIEW SWITCHER (v≈°etko v jednej karte)
    ========================================================== */
    const viewClosed   = document.getElementById('viewClosed');
    const viewFlowers  = document.getElementById('viewFlowers');
    const viewValentine= document.getElementById('viewValentine');

    function showView(which){
      const all = [viewClosed, viewFlowers, viewValentine];
      all.forEach(v => v.classList.remove('is-active'));

      if(which === 'closed')   viewClosed.classList.add('is-active');
      if(which === 'flowers')  viewFlowers.classList.add('is-active');
      if(which === 'valentine')viewValentine.classList.add('is-active');
    }

    /* =========================================================
       ENVELOPE OPEN ‚Äì list je v ob√°lke, flap sa otvor√≠, list vyjde
    ========================================================== */
    const envelope = document.getElementById('envelope');

    let openedOnce = false;

    envelope.addEventListener('click', () => {
      if(openedOnce) {
        // u≈æ otvoren√© -> rovno na flowers
        showView('flowers');
        return;
      }

      openedOnce = true;
      envelope.classList.add('is-open');

      // po anim√°cii prepni view
      setTimeout(() => {
        showView('flowers');
      }, 780);
    });

    /* =========================================================
       MODAL ‚Äì letter/photos/song
    ========================================================== */
    const overlay   = document.getElementById('overlay');
    const modalBody = document.getElementById('modalBody');
    const closeModalBtn = document.getElementById('closeModal');

    const tplLetter = document.getElementById('tplLetter');
    const tplPhotos = document.getElementById('tplPhotos');
    const tplSong   = document.getElementById('tplSong');

    function openModal(type){
      modalBody.innerHTML = '';

      let node;
      if(type === 'letter') node = tplLetter.content.cloneNode(true);
      if(type === 'photos') node = tplPhotos.content.cloneNode(true);
      if(type === 'song')   node = tplSong.content.cloneNode(true);

      modalBody.appendChild(node);

      overlay.classList.add('is-open');
      overlay.setAttribute('aria-hidden', 'false');

      // gallery init
      if(type === 'photos'){
        const viewer = document.getElementById('viewer');
        const thumbs = document.getElementById('thumbs');

        const first = thumbs.querySelector('button[data-src]');
        if(first) viewer.src = first.dataset.src;

        thumbs.addEventListener('click', (e) => {
          const btn = e.target.closest('button[data-src]');
          if(!btn) return;
          viewer.src = btn.dataset.src;
        });
      }
    }

    function closeModal(){
      // stop youtube playback
      const frame = document.getElementById('ytFrame');
      if(frame){
        const src = frame.src;
        frame.src = src;
      }
      overlay.classList.remove('is-open');
      overlay.setAttribute('aria-hidden', 'true');
      modalBody.innerHTML = '';
    }

    // click gifts
    viewFlowers.addEventListener('click', (e) => {
      const gift = e.target.closest('.gift[data-modal]');
      if(!gift) return;
      openModal(gift.dataset.modal);
    });

    closeModalBtn.addEventListener('click', closeModal);
    overlay.addEventListener('click', (e) => {
      if(e.target === overlay) closeModal();
    });
    window.addEventListener('keydown', (e) => {
      if(e.key === 'Escape' && overlay.classList.contains('is-open')) closeModal();
    });

    /* =========================================================
       NAV (Flowers -> Valentine) + Home
    ========================================================== */
    document.getElementById('toValentine').addEventListener('click', () => showView('valentine'));
    document.getElementById('homeBtn').addEventListener('click', () => showView('flowers'));

    /* =========================================================
       NO BUTTON ESCAPE ‚Äì keƒè sa pribl√≠≈æi≈° / klik√°≈°, ujde
       (toto si priamo p√Ωtal: "NO sa nehybe" -> teraz sa h√Ωbe)
    ========================================================== */
    const btnArea = document.getElementById('btnArea');
    const noBtn   = document.getElementById('noBtn');
    const yesBtn  = document.getElementById('yesBtn');

    function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

    function moveNoButton(){
      const area = btnArea.getBoundingClientRect();
      const btn  = noBtn.getBoundingClientRect();

      // hranice aby nevy≈°lo mimo
      const pad = 8;
      const maxX = area.width  - btn.width  - pad;
      const maxY = area.height - btn.height - pad;

      const x = Math.random() * maxX;
      const y = Math.random() * maxY;

      // nastav√≠me absolute left/top v r√°mci btnArea
      noBtn.style.left = `${clamp(x, pad, maxX)}px`;
      noBtn.style.top  = `${clamp(y, pad, maxY)}px`;
      noBtn.style.transform = 'translateX(0)'; // vypneme p√¥vodn√Ω translate
    }

    // prv√Ω ‚Äúreset‚Äù keƒè sa zobraz√≠ valentine view
    const observer = new MutationObserver(() => {
      if(viewValentine.classList.contains('is-active')){
        // reset do default poz√≠cie vpravo, potom nech utek√°
        noBtn.style.left = '50%';
        noBtn.style.top  = '22px';
        noBtn.style.transform = 'translateX(16px)';
      }
    });
    observer.observe(viewValentine, { attributes:true, attributeFilter:['class'] });

    // utek√° keƒè sa k nemu pribl√≠≈æi≈° my≈°ou
    noBtn.addEventListener('mouseenter', moveNoButton);

    // utek√° aj na touch (mobil)
    noBtn.addEventListener('touchstart', (e) => {
      e.preventDefault();
      moveNoButton();
    }, { passive:false });

    // a aj keƒè ho skoro klikne≈°
    noBtn.addEventListener('mousedown', (e) => {
      e.preventDefault();
      moveNoButton();
    });

    // YES ‚Äì zatiaƒæ len uk√°≈æeme modal list (m√¥≈æe≈° zmeni≈• na ƒçokoƒævek)
    yesBtn.addEventListener('click', () => {
      openModal('letter');
    });
  </script>
</body>
</html>
